<script setup lang='ts'>
/* -------------------------------------------------------------------------
--------------------------------- STORES -----------------------------------
------------------------------------------------------------------------- */

/* -------------------------------------------------------------------------
------------------------------- VARIABLES ----------------------------------
------------------------------------------------------------------------- */
const notifications = ref();

/* -------------------------------------------------------------------------
------------------------------- FONCTIONS ----------------------------------
------------------------------------------------------------------------- */
async function fetctNotification() {
    const response = await $fetch(`/api/notifications`);

    if (response.ok) {
        useToast().add({
            title: 'Notifications fetched !',
            color: 'success',
            icon: 'i-heroicons-check-circle'
        });

        notifications.value = response.data;
    } else {
        useToast().add({
            title: 'Error while fetching notifications !',
            color: 'error',
            icon: 'x-mark'
        });

        console.error('Error while fetching notifications', response);
    }
}

/* -------------------------------------------------------------------------
------------------------------- WATCHERS -----------------------------------
------------------------------------------------------------------------- */

/* -------------------------------------------------------------------------
---------------------------- LIFECYCLE HOOKS -------------------------------
------------------------------------------------------------------------- */
</script>

<template>
    <UButton @click="fetctNotification">Fetch notification</UButton>
    <pre>{{ notifications }}</pre>
</template>